<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Swifter Swift必备Tips - Knowledge</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">EricLiu's Blog</a></li><li class="chapter-item expanded affix "><li class="part-title">CS</li><li class="chapter-item expanded "><a href="../CS/AsynchronyProgramming.html"><strong aria-hidden="true">1.</strong> 异步编程</a></li><li class="chapter-item expanded "><a href="../CS/DesignPatterns.html"><strong aria-hidden="true">2.</strong> 设计模式</a></li><li class="chapter-item expanded "><a href="../CS/计算机组成和结构.html"><strong aria-hidden="true">3.</strong> 计算机组成和结构</a></li><li class="chapter-item expanded affix "><li class="part-title">Swift语言参考</li><li class="chapter-item expanded "><a href="../Swift/ReferenceManual/LexicalStructure.html"><strong aria-hidden="true">4.</strong> 词法结构</a></li><li class="chapter-item expanded "><a href="../Swift/ReferenceManual/Types.html"><strong aria-hidden="true">5.</strong> 类型</a></li><li class="chapter-item expanded "><a href="../Swift/ReferenceManual/Expressions.html"><strong aria-hidden="true">6.</strong> 表达式</a></li><li class="chapter-item expanded "><a href="../Swift/ReferenceManual/Statements.html"><strong aria-hidden="true">7.</strong> 语句</a></li><li class="chapter-item expanded "><a href="../Swift/ReferenceManual/Declarations.html"><strong aria-hidden="true">8.</strong> 声明</a></li><li class="chapter-item expanded "><a href="../Swift/ReferenceManual/Attributes.html"><strong aria-hidden="true">9.</strong> 特性</a></li><li class="chapter-item expanded affix "><li class="part-title">iOS</li><li class="chapter-item expanded "><a href="../iOS/Data-structure.html"><strong aria-hidden="true">10.</strong> 数据结构</a></li><li class="chapter-item expanded "><a href="../iOS/Algorithm.html"><strong aria-hidden="true">11.</strong> 算法</a></li><li class="chapter-item expanded "><a href="../iOS/Swift.html"><strong aria-hidden="true">12.</strong> Swift</a></li><li class="chapter-item expanded "><a href="../iOS/String.html"><strong aria-hidden="true">13.</strong> String</a></li><li class="chapter-item expanded "><a href="../iOS/Foundation.html"><strong aria-hidden="true">14.</strong> Foundation</a></li><li class="chapter-item expanded "><a href="../iOS/UIKit.html"><strong aria-hidden="true">15.</strong> UIKit</a></li><li class="chapter-item expanded "><a href="../iOS/WebKit.html"><strong aria-hidden="true">16.</strong> WebKit</a></li><li class="chapter-item expanded "><a href="../iOS/Memory-management.html"><strong aria-hidden="true">17.</strong> 内存管理</a></li><li class="chapter-item expanded "><a href="../iOS/Network.html"><strong aria-hidden="true">18.</strong> 网络</a></li><li class="chapter-item expanded "><a href="../iOS/Data-storage.html"><strong aria-hidden="true">19.</strong> 数据存储</a></li><li class="chapter-item expanded "><a href="../iOS/Multi-thread.html"><strong aria-hidden="true">20.</strong> 多线程</a></li><li class="chapter-item expanded "><a href="../iOS/Design-patterns.html"><strong aria-hidden="true">21.</strong> 设计模式</a></li><li class="chapter-item expanded "><a href="../iOS/Concurrency.html"><strong aria-hidden="true">22.</strong> 并发编程</a></li><li class="chapter-item expanded "><a href="../iOS/Alamofire.html"><strong aria-hidden="true">23.</strong> Alamofire</a></li><li class="chapter-item expanded "><a href="../iOS/OC2Swift.html"><strong aria-hidden="true">24.</strong> Objective-C组件库用Swift转写的方法论</a></li><li class="chapter-item expanded "><a href="../iOS/ApplicationExtensionUnavailable.html"><strong aria-hidden="true">25.</strong> 应用扩展不可用编译错误</a></li><li class="chapter-item expanded "><a href="../iOS/UnsafePointer.html"><strong aria-hidden="true">26.</strong> Swift指针</a></li><li class="chapter-item expanded affix "><li class="part-title">Web</li><li class="chapter-item expanded "><a href="../Web/CSS.html"><strong aria-hidden="true">27.</strong> CSS</a></li><li class="chapter-item expanded "><a href="../Web/HTML.html"><strong aria-hidden="true">28.</strong> HTML</a></li><li class="chapter-item expanded "><a href="../Web/JavaScript.html"><strong aria-hidden="true">29.</strong> JavaScript</a></li><li class="chapter-item expanded "><a href="../Web/JavaScript.html"><strong aria-hidden="true">30.</strong> React</a></li><li class="chapter-item expanded "><a href="../Web/Taro.html"><strong aria-hidden="true">31.</strong> Taro快速开始</a></li><li class="chapter-item expanded "><a href="../Web/Vue.html"><strong aria-hidden="true">32.</strong> Vue</a></li><li class="chapter-item expanded "><a href="../Web/http.html"><strong aria-hidden="true">33.</strong> http</a></li><li class="chapter-item expanded "><a href="../Web/Performance-optimization.html"><strong aria-hidden="true">34.</strong> 性能优化</a></li><li class="chapter-item expanded affix "><li class="part-title">Books</li><li class="chapter-item expanded "><a href="../Books/Swifter-SwiftTips.html" class="active"><strong aria-hidden="true">35.</strong> Swifter Swift必备Tips</a></li><li class="chapter-item expanded affix "><li class="part-title">Tools</li><li class="chapter-item expanded "><a href="../Tools/SwiftToolChain.html"><strong aria-hidden="true">36.</strong> Swift工具链</a></li><li class="chapter-item expanded "><a href="../Tools/Git.html"><strong aria-hidden="true">37.</strong> Git</a></li><li class="chapter-item expanded "><a href="../Tools/DocC.html"><strong aria-hidden="true">38.</strong> DocC</a></li><li class="chapter-item expanded "><a href="../Tools/Gitmoji.html"><strong aria-hidden="true">39.</strong> Gitmoji</a></li><li class="chapter-item expanded "><a href="../Tools/UsefulWebsites.html"><strong aria-hidden="true">40.</strong> 有用的网站</a></li><li class="chapter-item expanded "><a href="../Tools/mdbook.html"><strong aria-hidden="true">41.</strong> mdbook</a></li><li class="chapter-item expanded "><a href="../Tools/Vuepress.html"><strong aria-hidden="true">42.</strong> Vuepress</a></li><li class="chapter-item expanded "><a href="../Tools/Markdown.html"><strong aria-hidden="true">43.</strong> Markdown</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Knowledge</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="swifter-swift必备tips"><a class="header" href="#swifter-swift必备tips">Swifter Swift必备Tips</a></h1>
<h2 id="1-柯里化"><a class="header" href="#1-柯里化">1. 柯里化</a></h2>
<pre><code class="language-swift">func addTo(_ adder: Int) -&gt; (Int) -&gt; Int {
    return { num in
        adder + num
    }
}

let addToOne = addTo(1)
let addToTwo = addTo(2)

print(addToOne(10)) // 11
print(addToTwo(10)) // 12
</code></pre>
<h2 id="2-sequence-for-in迭代"><a class="header" href="#2-sequence-for-in迭代">2. Sequence for-in迭代</a></h2>
<pre><code class="language-swift">struct IntArray: Sequence {
    var array: [Int]
    
    func makeIterator() -&gt; IntArrayIterator {
        return IntArrayIterator(array: array)
    }
}

struct IntArrayIterator: IteratorProtocol {
    var array: [Int]
    var index = 0
    
    mutating func next() -&gt; Int? {
        guard index &lt; array.count else { return nil }
        defer {
            index += 1
        }
        return array[index]
    }
}

let array = IntArray(array: [0, 1, 2, 3])
for item in array {
    print(item)
}
</code></pre>
<h2 id="3-元组多返回值"><a class="header" href="#3-元组多返回值">3. 元组多返回值</a></h2>
<pre><code class="language-swift">func getColor() -&gt; (R: Int, G: Int, B: Int) {
    return (255, 255, 255)
}

print(getColor()) // (R: 255, G: 255, B: 255)
</code></pre>
<h2 id="4-autoclosure-自动闭包"><a class="header" href="#4-autoclosure-自动闭包">4. @autoclosure 自动闭包</a></h2>
<pre><code class="language-swift">func closure(_ number: @autoclosure () -&gt; Int) -&gt; Int {
    let number = number()
    return number
}

print(closure(3)) // 3
</code></pre>
<h2 id="4-escaping-逃逸闭包"><a class="header" href="#4-escaping-逃逸闭包">4. @escaping 逃逸闭包</a></h2>
<pre><code class="language-swift">import Dispatch

func asyncAfter(seconds: Int, execute: @escaping () -&gt; Void) {
    DispatchQueue.main.asyncAfter(deadline: .now() + .seconds(seconds)) {
        execute()
    }
}

asyncAfter(seconds: 3) {
    print(&quot;3秒后执行&quot;)
}
</code></pre>
<h2 id="5-操作符重载"><a class="header" href="#5-操作符重载">5. 操作符重载</a></h2>
<pre><code class="language-swift">struct ValueInt {
    let value: Int
    
    static func +(left: ValueInt, right: ValueInt) -&gt; Int {
        left.value + right.value
    }
}

let a = ValueInt(value: 1)
let b = ValueInt(value: 3)

print(a + b) // 4
</code></pre>
<h2 id="6-函数参数传递"><a class="header" href="#6-函数参数传递">6. 函数参数传递</a></h2>
<ul>
<li>
<h3 id="值类型参数"><a class="header" href="#值类型参数">值类型参数</a></h3>
<h4 id="不更改原值"><a class="header" href="#不更改原值">不更改原值</a></h4>
<pre><code class="language-swift">func increased(_ variable: Int) -&gt; Int {
    var variable = variable
    variable += 1
    return variable
}

print(increased(0)) // 1
</code></pre>
<h4 id="更改原值"><a class="header" href="#更改原值">更改原值</a></h4>
<pre><code class="language-swift">func increase(_ variable: inout Int) {
    variable += 1
}

var variable = 0

increase(&amp;variable)

print(variable) // 1
</code></pre>
</li>
<li>
<h3 id="引用类型参数"><a class="header" href="#引用类型参数">引用类型参数</a></h3>
<h4 id="不更改原值-1"><a class="header" href="#不更改原值-1">不更改原值</a></h4>
<pre><code class="language-swift">class ReferenceInt {
    var value: Int
    init(_ value: Int) {
        self.value = value
    }
}

func increased(_ variable: ReferenceInt) -&gt; ReferenceInt {
    let variable = ReferenceInt(variable.value)
    variable.value += 1
    return variable
}

let variable = ReferenceInt(0)

print(increased(variable).value) // 1
print(variable.value) // 0
</code></pre>
<h4 id="更改原值-1"><a class="header" href="#更改原值-1">更改原值</a></h4>
<pre><code class="language-swift">func increase(_ variable: ReferenceInt) {
    variable.value += 1
}


let variable = ReferenceInt(0)
increase(variable)
print(variable.value)
</code></pre>
</li>
</ul>
<h2 id="7-字面量表达协议"><a class="header" href="#7-字面量表达协议">7. 字面量表达协议</a></h2>
<pre><code class="language-swift">struct ValueInt: ExpressibleByIntegerLiteral {
    var value: Int
    
    init(integerLiteral value: IntegerLiteralType) {
        self.value = value
    }
}

let variable: ValueInt = 3
print(variable.value) // 3
</code></pre>
<h2 id="8-subscript-下标访问"><a class="header" href="#8-subscript-下标访问">8. subscript 下标访问</a></h2>
<pre><code class="language-swift">struct IntArray {
    var array: [Int]

    subscript(index: Int) -&gt; Int {
        get {
            array[index]
        }
        set {
            array[index] = newValue
        }
    }
}

var array = IntArray(array: [0, 1, 2, 3])
print(array[1]) // 1
array[3] = 4
print(array[3]) // 4
</code></pre>
<h2 id="9-typealias-类型别名"><a class="header" href="#9-typealias-类型别名">9. typealias 类型别名</a></h2>
<pre><code class="language-swift">typealias IntArray = Array&lt;Int&gt;


protocol A {
    var a: Int { get }
}

protocol B {
    var b: Int { get }
}

typealias C = A &amp; B

struct D: C {
    var a: Int
    
    var b: Int
    
}
</code></pre>
<h2 id="10-associatedtype-相关类型"><a class="header" href="#10-associatedtype-相关类型">10. associatedType 相关类型</a></h2>
<pre><code class="language-swift">protocol ArrayExtension {
    associatedtype T
    
    mutating func appendAndPrint(_ newElement: T)
}

extension Array: ArrayExtension {
    typealias T = Element
    
    mutating func appendAndPrint(_ newElement: Element) {
        print(newElement)
        append(newElement)
    }
}

var array = Array&lt;Int&gt;()
array.appendAndPrint(1) // 1
</code></pre>
<h2 id="11-可变参数"><a class="header" href="#11-可变参数">11. 可变参数</a></h2>
<pre><code class="language-swift">func sum(_ number: Int...) -&gt; Int {
    return number.reduce(0, +)
}

print(sum(0, 1, 2, 3)) // 6
</code></pre>
<h2 id="12-初始化顺序"><a class="header" href="#12-初始化顺序">12. 初始化顺序</a></h2>
<pre><code class="language-swift">class Rectangle {
    var name: String
    init() {
        name = &quot;长方形&quot;
    }
}

class Square: Rectangle {
    var sideLength: Int
    override init() {
        sideLength = 10
        super.init()
        name = &quot;正方形&quot;
    }
}
</code></pre>
<h2 id="13-可空初始化"><a class="header" href="#13-可空初始化">13. 可空初始化</a></h2>
<pre><code class="language-swift">struct PositiveNumberString {
    var value: String
    init?(_ value: Int) {
        guard value &gt; 0 else { return nil }
        self.value = String(value)
    }
}

let str = PositiveNumberString(-1)
print(str as Any) // nil
</code></pre>
<h2 id="14-函数默认参数"><a class="header" href="#14-函数默认参数">14. 函数默认参数</a></h2>
<pre><code class="language-swift">func printInt(_ value: Int = 0) {
    print(value)
}

printInt() // 0
printInt(1) // 1
</code></pre>
<h2 id="15---区间操作符"><a class="header" href="#15---区间操作符">15. ... ..&lt; 区间操作符</a></h2>
<pre><code class="language-swift">let range = 0..&lt;3
let closedRange = 0...3

print([Int](range)) // [0, 1, 2]
print([Int](closedRange)) // [0, 1, 2, 3]

print((&quot;a&quot;...&quot;z&quot;).contains(&quot;c&quot;)) // true
</code></pre>
<h2 id="16-元类型"><a class="header" href="#16-元类型">16. 元类型</a></h2>
<pre><code class="language-swift">struct Type {
    static func staticMethod() {
        print(&quot;静态方法&quot;)
    }
    
    func instanceMethod() {
        print(&quot;实例方法&quot;)
    }
}

let instance: Type = Type()
instance.instanceMethod() // 实例方法
let type: Type.Type = Type.self
type.staticMethod() // 静态方法
</code></pre>
<h2 id="17-深拷贝"><a class="header" href="#17-深拷贝">17. 深拷贝</a></h2>
<pre><code class="language-swift">protocol Copyable {
    func copy() -&gt; Self
}

class ReferenceInt: Copyable {
    var value: Int
    
    required init(_ value: Int) {
        self.value = value
    }
    
    func copy() -&gt; Self {
        return type(of: self).init(value)
    }

}


let a = ReferenceInt(0)
let b = a.copy()
b.value = 1

print(a.value) // 0
print(b.value) // 1
</code></pre>
<h2 id="18-属性观察"><a class="header" href="#18-属性观察">18. 属性观察</a></h2>
<pre><code class="language-swift">struct ValueInt {
    var value: Int {
        willSet {
            print(&quot;值即将从\(value)更改为\(newValue)&quot;)
        }
        didSet {
            print(&quot;值已经从\(oldValue)更改为\(value)&quot;)
        }
    }
}

var variable = ValueInt(value: 0)
variable.value = 1 // 值即将从0更改为1 \n 值已经从0更改为1
</code></pre>
<h2 id="19-lazy-懒加载"><a class="header" href="#19-lazy-懒加载">19. lazy 懒加载</a></h2>
<pre><code class="language-swift">struct LazyMan {
    var food: String = {
        print(&quot;吃饭&quot;)
        return &quot;食物&quot;
    }()
    
    lazy var work: String = {
        print(&quot;起床&quot;)
        return &quot;工作&quot;
    }()
}

var man = LazyMan() // 吃饭
print(man.work) // 起床 \n 工作
</code></pre>
<h2 id="20-懒实现序列"><a class="header" href="#20-懒实现序列">20. 懒实现序列</a></h2>
<pre><code class="language-swift">let array = [0, 1, 2, 3]
let result = array.lazy.map { item -&gt; Int in
    print(&quot;正在映射\(item)&quot;)
    return item + 1
}

for item in result {
    print(&quot;映射结果\(item)&quot;)
    break
}

// 正在映射0
// 映射结果1
</code></pre>
<pre><code class="language-swift">let array = [0, 1, 2, 3]
let result = array.map { item -&gt; Int in
    print(&quot;正在映射\(item)&quot;)
    return item + 1
}

for item in result {
    print(&quot;映射结果\(item)&quot;)
    break
}

// 正在映射0
// 正在映射1
// 正在映射2
// 正在映射3
// 映射结果1
</code></pre>
<h2 id="21-optional-map"><a class="header" href="#21-optional-map">21. Optional Map</a></h2>
<pre><code class="language-swift">var variable: Int? = 0
let result = variable.map { variable in
    variable + 1
}

print(result as Any) // Optional(1)
</code></pre>
<pre><code class="language-swift">var variable: Int? = 0
var result: Int? = nil
if let variable = variable {
    result = variable + 1
}

print(result as Any) // Optional(1)
</code></pre>
<h2 id="22-where-模式匹配"><a class="header" href="#22-where-模式匹配">22. where 模式匹配</a></h2>
<pre><code class="language-swift">let model = &quot;iPhone12 mini&quot;

switch model {
case let model where model.hasPrefix(&quot;iPhone&quot;):
    print(&quot;iPhone&quot;)
default:
    break
}
// iPhone


for i in 0..&lt;10 where i &lt; 3 {
    print(i)
}
// 0 \n 1 \n 2
</code></pre>
<h2 id="23-indirect-嵌套enum"><a class="header" href="#23-indirect-嵌套enum">23. indirect 嵌套enum</a></h2>
<pre><code class="language-swift">indirect enum LinkedNode {
    case empty
    case node(Int, LinkedNode)
}

let linkedList = LinkedNode.node(0, .node(1, .node(2, .empty)))

print(linkedList) // node(0, node(1, .node(2, .empty)))
</code></pre>
<h2 id="24-实例方法的其它调用方式"><a class="header" href="#24-实例方法的其它调用方式">24. 实例方法的其它调用方式</a></h2>
<pre><code class="language-swift">struct ValueInt {
    let value: Int
    func call(_ way: String) {
        print(self.value, way)
    }
}

let v0 = ValueInt(value: 0)
v0.call(&quot;(value:)&quot;) // 0 (value:)
let v1 = ValueInt.init(value: 1)
v1.call(&quot;.init(value:)&quot;) // 1 .init(value:)

ValueInt.call(v0)(&quot;ValueInt.call(_ self:)&quot;) // 0 ValueInt.call(_ self:)

let call = ValueInt.call
call(v0)(&quot;call(_ self:)&quot;) // 0 call(_ self:)
</code></pre>
<h2 id="25-单例模式"><a class="header" href="#25-单例模式">25. 单例模式</a></h2>
<pre><code class="language-swift">struct Singleton {
    static let shared = Singleton()
    
}
</code></pre>
<h2 id="26-条件编译"><a class="header" href="#26-条件编译">26. 条件编译</a></h2>
<pre><code class="language-swift">#if os(iOS) || os(tvOS)
import UIKit
#elseif os(watchOS)
import WatchKit
#elseif os(macOS)
import AppKit
#endif
</code></pre>
<h2 id="27-注释标记"><a class="header" href="#27-注释标记">27. 注释标记</a></h2>
<pre><code class="language-swift">// MARK: - 分割线
// TODO: 待办
// FIXME: 待修复
</code></pre>
<h2 id="28-可选协议"><a class="header" href="#28-可选协议">28. 可选协议</a></h2>
<pre><code class="language-swift">import Foundation
// objc标记的协议只能被class类实现
@objc protocol OptionalProtocol {
    @objc optional func optionalMethod()
}
</code></pre>
<p>使用协议扩展来实现可选协议</p>
<pre><code class="language-swift">protocol OptionalProtocol {
    func optionalMethod()
}

extension OptionalProtocol {
    func optionalMethod() {
        
    }
}
</code></pre>
<h2 id="29-判断实例类型"><a class="header" href="#29-判断实例类型">29. 判断实例类型</a></h2>
<pre><code class="language-swift">print(type(of: 1)) // Int
print(1 is Int) // true
</code></pre>
<h2 id="30---判断相等"><a class="header" href="#30---判断相等">30. == === 判断相等</a></h2>
<pre><code class="language-swift">class ReferenceInt {
    var value: Int
    init(_ value: Int) {
        self.value = value
    }
    
    static func ==(left: ReferenceInt, right: ReferenceInt) -&gt; Bool {
        return left.value == right.value
    }
}

let a = ReferenceInt(0)
let b = ReferenceInt(0)
print(a == b) // true
print(a === b) // false
</code></pre>
<h2 id="31-格式化字符串"><a class="header" href="#31-格式化字符串">31. 格式化字符串</a></h2>
<pre><code class="language-swift">import Foundation
print(String(format: &quot;%.2f&quot;, 3.333333)) // 3.33
</code></pre>
<h2 id="32-optionset-操作集合"><a class="header" href="#32-optionset-操作集合">32. OptionSet 操作集合</a></h2>
<pre><code class="language-swift">struct Options: OptionSet {
    let rawValue: Int
    
    static let left = Options(rawValue: 1)
    static let top = Options(rawValue: 1 &lt;&lt; 1)
    static let right = Options(rawValue: 1 &lt;&lt; 2)
    static let bottom = Options(rawValue: 1 &lt;&lt; 3)
}

var option: Options = .left
print(option) // Options(rawValue: 1)
option = .top
print(option) // Options(rawValue: 2)
option = .right
print(option) // Options(rawValue: 4)
option = .bottom
print(option) // Options(rawValue: 8)
option = [.left, .top]
print(option) // Options(rawValue: 3)
option = [.left, .top, .right, .bottom]
print(option) // Options(rawValue: 15)
</code></pre>
<h2 id="33-enumerate-数组列举"><a class="header" href="#33-enumerate-数组列举">33. enumerate 数组列举</a></h2>
<pre><code class="language-swift">for (index, item) in (10..&lt;13).enumerated() {
    print(index, item)
}
// 0 10 \n 1 11 \n 2 12
</code></pre>
<h2 id="34-associated-object扩展存储属性"><a class="header" href="#34-associated-object扩展存储属性">34. Associated Object扩展存储属性</a></h2>
<pre><code class="language-swift">import ObjectiveC
// 只能为class类扩展
class IPhone {
    
}

private var key: Void?

extension IPhone {
    var storage: Int? {
        get {
            return objc_getAssociatedObject(self, &amp;key) as? Int
        }
        
        set {
            objc_setAssociatedObject(self, &amp;key, newValue, .OBJC_ASSOCIATION_RETAIN_NONATOMIC)
        }
    }
}

var iPhone = IPhone()
print(iPhone.storage as Any) // nil
iPhone.storage = 128
print(iPhone.storage as Any) // Optional(128)
</code></pre>
<h2 id="35-lock-锁"><a class="header" href="#35-lock-锁">35. Lock 锁</a></h2>
<pre><code class="language-swift">import Foundation

func synchronized(_ lock: AnyObject, execute: () -&gt; Void) {
    objc_sync_enter(lock)
    execute()
    objc_sync_exit(lock)
}

class SafeData {
    var data = 0
    
    func add(_ number: Int) {
        synchronized(self) {
            data += number
        }
    }
}

let safeData = SafeData()
for _ in 0..&lt;10000 {
    DispatchQueue.global().async {
        safeData.add(1)
    }
}

print(safeData.data) // 10000
</code></pre>
<h2 id="36-编译符号"><a class="header" href="#36-编译符号">36. 编译符号</a></h2>
<pre><code class="language-swift">#file // 符号所在文件路径
#line // 符号所在行号
#column // 符号所在列
#function // 符号所在方法名
</code></pre>
<h2 id="37-溢出操作符"><a class="header" href="#37-溢出操作符">37. 溢出操作符</a></h2>
<pre><code class="language-swift">var max = UInt.max
print(String(max, radix: 2))
// 1111111111111111111111111111111111111111111111111111111111111111
max = max &amp;+ 1
print(String(max, radix: 2)) // 0
</code></pre>
<h2 id="38-属性访问控制"><a class="header" href="#38-属性访问控制">38. 属性访问控制</a></h2>
<pre><code class="language-swift">private
fileprivate
internal
public
open
</code></pre>
<h2 id="39-swift解释执行"><a class="header" href="#39-swift解释执行">39. Swift解释执行</a></h2>
<pre><code class="language-swift">#!/usr/bin/env swift

print(&quot;hello&quot;)
</code></pre>
<h2 id="40-swiftc编译"><a class="header" href="#40-swiftc编译">40. swiftc编译</a></h2>
<pre><code class="language-shell">swiftc main.swift
</code></pre>
<h2 id="41-自定义打印输出"><a class="header" href="#41-自定义打印输出">41. 自定义打印输出</a></h2>
<pre><code class="language-swift">struct ValueInt: CustomStringConvertible {
    let value: Int
    
    var description: String {
        return &quot;这是一个自定义的描述\(value)&quot;
    }
}

print(ValueInt(value: 1)) // 这是一个自定义的描述1
</code></pre>
<h2 id="42-断言"><a class="header" href="#42-断言">42. 断言</a></h2>
<pre><code class="language-swift">// 断言只在Debug模式下有效
assert(1 == 1)
</code></pre>
<h2 id="43-错误退出"><a class="header" href="#43-错误退出">43. 错误退出</a></h2>
<pre><code class="language-swift">fatalError()
</code></pre>
<h2 id="44-指针操作"><a class="header" href="#44-指针操作">44. 指针操作</a></h2>
<pre><code class="language-swift">//#include &quot;stdio.h&quot;
//
//int main() {
//    int a[] = {0, 1, 2};
//    int *p = a;
//    *(p+2) = 3;
//    for(int i; i &lt; 3; i ++) {
//        printf(&quot;%d\n&quot;, a[i]);
//    }
//    // 0 \n 1 \n 3 \n
//    return 0;
//}

var array = [0, 1, 2]
let pointer = UnsafeMutableBufferPointer&lt;Int&gt;(start: &amp;array, count: array.count).baseAddress
pointer?.advanced(by: 2).pointee = 3
print(array) // [0, 1, 3]
</code></pre>
<h2 id="45-条件协议扩展"><a class="header" href="#45-条件协议扩展">45. 条件协议扩展</a></h2>
<pre><code class="language-swift">protocol NumberProtocol {
    
}

extension Int: NumberProtocol {}

extension NumberProtocol where Self == Int {
    func int() {
        print(&quot;只有Int类型才可以有此方法&quot;)
    }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../Web/Performance-optimization.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../Tools/SwiftToolChain.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../Web/Performance-optimization.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../Tools/SwiftToolChain.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
